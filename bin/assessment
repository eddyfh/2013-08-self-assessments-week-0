#! /usr/bin/env zsh

#

BRANCH=$1
FOLDERS="${@:2:$#}"
ME=`basename $0`
BIN=${"${0:A}"%$ME}
ROOT=$BIN..

pushd $ROOT
git checkout master
git pull
git checkout -b $BRANCH

for D in `ls -d $ROOT/*/`; do
    if [ -e $D/README.md ]; then
        git rm -r $D
    fi;
done;

git reset HEAD $FOLDERS
git checkout -- $FOLDERS

$BIN/readme

git commit -am "creating new assessment $BRANCH"
git push
popd
